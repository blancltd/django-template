{% load thumbnail %}


{% with slides=object.carouselslide_set.select_related.all %}
    {% if slides %}
        <div id="carousel-{{ object.id }}" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                {% for i in slides %}
                    <div class="item {% if forloop.first %}active{% endif %}">

                        <div class="item-content">
                            <div class="image">
                                {% thumbnail i.image.file 480x480 crop as thumb %}
                                <img src="{{ thumb.url }}" width="{{ thumb.width }}" height="{{ thumb.height }}" alt="{{ i.title }}">
                            </div>
                            <div class="text">
                                <div class="wrap">
                                    <strong>{{ i.title }}</strong>
                                    {{ i.content|linebreaks }}

                                    {% if i.link %}
                                        <a href="{{ i.link }}">{{ i.link_text|default:"Find out more" }}</a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                    </div>
                {% endfor %}
            </div>
            {% if slides|length > 1 %}
                <a class="left carousel-control" href="#carousel-{{ object.id }}" role="button" data-slide="prev">
                    <span class="sr-only">Previous</span>
                </a>
                <a class="right carousel-control" href="#carousel-{{ object.id }}" role="button" data-slide="next">
                    <span class="sr-only">Next</span>
                </a>
            {% endif %}
        </div>
    {% endif %}
{% endwith %}
